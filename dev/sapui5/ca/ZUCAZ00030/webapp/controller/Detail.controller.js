sap.ui.define(["hkmc/ca/zucaz00030/controller/BaseController","hkmc/ca/zucaz00010/dialog/Confirm","hkmc/ca/zucaz00010/utils/UploadSet"],function(t,e,i){"use strict";return t.extend("hkmc.ca.zucaz00030.controller.Detail",{_oUploadSet:null,onInit:function(){this.initViewConfigModel();this._getAuth();this.getRoute("RouteDetail").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(t){this._sPath="/"+t.getParameter("arguments").path;this.setViewConfig("/isEdit",false);this.getView().bindElement({path:this._sPath,events:{change:function(t){var e=t.getSource().getModel().getProperty(t.getSource().getPath());this._bindEditor("idRTEDetailEdit","{Content}");this._oUploadSet=new i("idUploadSet",this.byId("idUploadSetContainer"),"{viewConfig>/isEdit}",{beforeUploadStarts:this.onBeforeUploadStarts.bind(this),uploadComplete:this.onUploadComplete.bind(this)});this._oUploadSet.filterItems(this._getAppID(),e.Guid)}.bind(this)}})},_bindEditor:function(t,e){var i=this.getView().byId(t+"Container");var s=this.getViewModel("viewConfig").getProperty("/isEdit");this.setRichTextEditor(t,i,e,!s,"{viewConfig>/isEdit}")},handleEdit:function(){this.resetModelChanges();this.setViewConfig("/isEdit",true)},handleSave:function(){var t=this.getViewConfig("/isEdit");this._submitSave(!t)},handleCancel:function(t){this.resetModelChanges();var e=this.getView().getModel("viewConfig");e.setProperty("/isEdit",!e.getProperty("/isEdit"))},handleDelete:function(){var t=new e({handleSubmit:this._confirmDelete.bind(this)});t.delete()},_confirmDelete:function(){var t=this.getView().getModel(),e=this.getView().getBindingContext().getPath();var i=this.getResourceBundle();t.remove(e,{success:function(t,e){this.setViewConfig("/isEdit",false);sap.m.MessageToast.show(i.getText("msgDeleteSuccessfully"));this.goNavBack()}.bind(this),error:function(t){sap.m.MessageToast.show(JSON.parse(t.responseText).error.message.value)}})}})});