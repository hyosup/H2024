sap.ui.define(["sap/ui/base/ManagedObject","hkmc/ca/zucaz00010/model/formatter","sap/m/upload/UploadSet","sap/m/upload/UploadSetItem","sap/m/ObjectAttribute","sap/ui/model/odata/v2/ODataModel"],function(e,t,a,o,l,i){"use strict";return e.extend("hkmc.ca.zucaz00010.utils.UploadSet",{formatter:t,_oUploadSet:null,_oDataModel:null,_aDeleteFiles:[],_sServiceURL:"/sap/opu/odata/sap/ZGWCAZ00020_SRV/",constructor:function(e,d,s,p){if(d){d.destroyItems()}this._aDeleteFiles=[];var r=new o({enabledEdit:false,enabledRemove:s,url:"{attachModel>Downurl}",fileName:"{attachModel>FileName}",visibleEdit:false,visibleRemove:true,mediaType:"{attachModel>Mimetype}",attributes:[new l({text:"{attachModel>Erdat}",title:"Created on"}),new l({text:{path:"attachModel>FileSize",formatter:t.formatFileSize},title:"Size"})]});if(p.removePressed){r.attachRemovePressed(p.removePressed.bind(this))}else{r.attachRemovePressed(this._handleRemovePressed.bind(this))}if(e===""){this._oUploadSet=new a({maxFileSize:100,instantUpload:false,uploadEnabled:s,uploadUrl:"/sap/opu/odata/sap/ZGWCAZ00020_SRV/FileSet",items:{path:"attachModel>/FileListSet",template:r}})}else{this._oUploadSet=new a({id:e,maxFileSize:100,instantUpload:false,uploadEnabled:s,uploadUrl:"/sap/opu/odata/sap/ZGWCAZ00020_SRV/FileSet",items:{path:"attachModel>/FileListSet",template:r}})}this._oDataModel=new i(this._sServiceURL,{defaultCountMode:sap.ui.model.odata.CountMode.None});this._oUploadSet.setModel(this._oDataModel,"attachModel");if(p.beforeUploadStarts){this._oUploadSet.attachBeforeUploadStarts(p.beforeUploadStarts)}if(p.uploadComplete){this._oUploadSet.attachUploadCompleted(p.uploadComplete)}if(p.fileSizeExceeded){this._oUploadSet.attachFileSizeExceeded(p.fileSizeExceeded)}if(d){d.addItem(this._oUploadSet)}},_handleRemovePressed:function(e){var t=e.getSource();this._aDeleteFiles.push(t.getBindingContext("attachModel"))},setVisibleRemove:function(e){this._oUploadSet.getItems().forEach(function(t){t.setVisibleRemove(e)})},filterItems:function(e,t){var a=[];a.push(new sap.ui.model.Filter("AppId",sap.ui.model.FilterOperator.EQ,e));a.push(new sap.ui.model.Filter("CboKey",sap.ui.model.FilterOperator.EQ,t));this._oUploadSet.getBinding("items").filter(a)},upload:function(){this._oUploadSet.upload();this._aDeleteFiles.forEach(function(e){this._oDataModel.remove(e.getPath())}.bind(this))}})});