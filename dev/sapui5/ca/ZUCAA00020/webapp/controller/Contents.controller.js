sap.ui.define(["hkmc/ca/zucaa00020/controller/BaseController","hkmc/ca/zucaa00020/model/formatter","sap/ui/model/json/JSONModel","sap/m/MessageToast"],function(e,t,n,a){"use strict";return e.extend("hkmc.ca.zucaa00020.controller.Contents",{formatter:t,onInit:function(){this.getRoute("RouteContents").attachPatternMatched(this._onObjectMatched,this);this.getRoute("RouteSearchContents").attachPatternMatched(this._onObjectSearchMatched,this)},_onObjectMatched:function(e){this._oParameter=e.getParameter("arguments");this.setViewConfig("/contentLanguage",this._oParameter.spras);this._bindView(this._oParameter.node_id,"")},_onObjectSearchMatched:function(e){this._oParameter=e.getParameter("arguments");this.setViewConfig("/contentLanguage",this._oParameter.spras);this._bindView(this._oParameter.pnode_id,this._oParameter.node_id)},handleTabSelect:function(e){this._bindHTML(e.getParameter("key"))},handleLanguChange:function(e){this._bindView(this._oParameter.node_id,"")},_bindView:function(e,t){var n=this.getModel().createKey("/TreeSet",{NodeId:e,Version:this._oParameter.version,Spras:this.getViewConfig("/contentLanguage")});var a=this.byId("idTabHeader");this.getView().bindElement({path:n,parameters:{expand:"ToSubSection"},events:{dataReceived:function(e){a.setSelectedKey(t)},change:function(){a.setSelectedKey(t)}}});this._bindHTML(t)},_bindHTML:function(e){var t=this.getModel(),n=this.byId("idScroll"),a=this.getModel().createKey("/ContentListSet",{NodeId:e,Version:this._oParameter.version,PnodeId:this._oParameter.node_id,Spras:this.getViewConfig("/contentLanguage")});n.destroyContent();t.read(a,{success:function(e,t){n.addContent(new sap.ui.core.HTML({content:e.Content}))}.bind(this)})},handleFullScreenPress:function(){if(this.getViewConfig("/layout")===sap.f.LayoutType.MidColumnFullScreen){this.setViewConfig("/layout",sap.f.LayoutType.TwoColumnsMidExpanded)}else{this.setViewConfig("/layout",sap.f.LayoutType.MidColumnFullScreen)}}})});